1. Имена типов - uri. 
они могут совпадать с пространством имен, либо быть псевдноимом, объявленым в <namespace>.
Префикс типа выводится из этого uri и xmlns, где оно обязано быть объявлено.

2. Имена <contents elements> - NCName. При ссылки (@ref) на них используется strict QName, с префиксом имени типа.

3. Имена элементов и аттрибутов - strict QName (возможном, с использование псевдноима пространства имен). 
Для ссылки используется оно же.

4. @ref для <typedefs> верхнего уровня не допусткается!

5. @name для <contents elements> допуксается только для верхнего уровня!

6. @ref и @name для <typedefs> не должны использоваться одновременно!

7. @action для <element> верхнего уровня допускаются только внутри redefine!

8. Связь @action и @inherit см. в описании @action.




И того, для каждого <typedefs> получаем типы

1. Базовый, без @ref и @name.

2. С @name, @ref и указанием не использовать их одновременно.  (нижний уровень) 

3. Без @ref но с @name (верхной) 

(Толлку мало.)



Группы атрибутов.


1a. @name as xQName
1b. @name as NCName

2. @ref

3. 2+1a
4. 2+1b

5. @action и @inherit

6. use...

7. if...


ТОДО: префиксы для аттрибутов