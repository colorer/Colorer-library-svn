<html><body style='color:#000000; background:#ffffff; '><pre>
  0: <span style='color:#a65700; background:#ffffe8; '>&lt;?php</span><span style='color:#000000; background:#ffffe8; '></span>
  1: <span style='color:#000000; background:#ffffe8; '></span>
  2: <span style='color:#696969; background:#ffffe8; '>/*</span>
  3: <span style='color:#696969; background:#ffffe8; '> *    W-AGORA 4.0</span>
  4: <span style='color:#696969; background:#ffffe8; '> *    -----------</span>
  5: <span style='color:#696969; background:#ffffe8; '> *    Usage:        Create a new user for a site</span>
  6: <span style='color:#696969; background:#ffffe8; '> *    Author:        Marc Druilhe </span><span style='color:#0000e6; background:#ffffe8; '>&lt;</span><span style='color:#7144c4; background:#ffffe8; '>mdruilhe@w-agora.com</span><span style='color:#0000e6; background:#ffffe8; '>></span><span style='color:#696969; background:#ffffe8; '></span>
  7: <span style='color:#696969; background:#ffffe8; '> */</span><span style='color:#000000; background:#ffffe8; '></span>
  8: <span style='color:#000000; background:#ffffe8; '></span>
  9: <span style='color:#800000; background:#ffffe8; font-weight:bold; '>require</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"init_admin.inc"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 10: <span style='color:#000000; background:#ffffe8; '></span>
 11: <span style='color:#696969; background:#ffffe8; '># Read site administration configuration</span><span style='color:#000000; background:#ffffe8; '></span>
 12: <span style='color:#696969; background:#ffffe8; '># --------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 13: <span style='color:#800000; background:#ffffe8; font-weight:bold; '>require</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$site_cfg_file</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '>    </span>
 14: <span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>empty</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_msgs</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 15: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>include</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$bn_dir_default</span><span style='color:#0000e6; background:#ffffe8; '>/site_msgs.</span><span style='color:#0000e6; background:#ffffe8; '>$ext</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 16: <span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>else</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 17: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>include</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$bn_dir</span><span style='color:#0000e6; background:#ffffe8; '>/</span><span style='color:#0000e6; background:#ffffe8; '>$bn_msgs</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 18: <span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 19: <span style='color:#000000; background:#ffffe8; '></span>
 20: <span style='color:#000000; background:#ffffe8; '>display_header </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"New user"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 21: <span style='color:#000000; background:#ffffe8; '></span>
 22: <span style='color:#696969; background:#ffffe8; '># gets all forums in this site for which the logged user is moderator</span><span style='color:#000000; background:#ffffe8; '></span>
 23: <span style='color:#696969; background:#ffffe8; '># -------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 24: <span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>level</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> ADMIN </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 25: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#696969; background:#ffffe8; '>// get all forums if user is administrator</span><span style='color:#000000; background:#ffffe8; '></span>
 26: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>listForums </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 27: <span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>else</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 28: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>listForums </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>userid</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 29: <span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 30: <span style='color:#000000; background:#ffffe8; '></span>
 31: <span style='color:#696969; background:#ffffe8; '># If Creation form have been submitted</span><span style='color:#000000; background:#ffffe8; '></span>
 32: <span style='color:#696969; background:#ffffe8; '># ------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 33: <span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$go</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 34: <span style='color:#000000; background:#ffffe8; '></span>
 35: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$go</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 36: <span style='color:#000000; background:#ffffe8; '></span>
 37: <span style='color:#696969; background:#ffffe8; '>#    Check for required fields</span><span style='color:#000000; background:#ffffe8; '></span>
 38: <span style='color:#696969; background:#ffffe8; '>#    -------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 39: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>empty</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$passwd1</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>|</span><span style='color:#808030; background:#ffffe8; '>|</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$passwd1</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>!</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$passwd2</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 40: <span style='color:#000000; background:#ffffe8; '>        MsgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"password must be set and must be entered twice, please verify"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 41: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 42: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 43: <span style='color:#000000; background:#ffffe8; '></span>
 44: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>include</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$tmpl_dir</span><span style='color:#0000e6; background:#ffffe8; '>/admin/user_fields.</span><span style='color:#0000e6; background:#ffffe8; '>$ext</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 45: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#400000; background:#ffffe8; '>is_array</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_bind_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 46: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>while</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>list</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$required</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>each</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_bind_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 47: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$required</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>!</span><span style='color:#000000; background:#ffffe8; '>$</span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 48: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$mess</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$field</span><span style='color:#0000e6; background:#ffffe8; '> : "</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#000000; background:#ffffe8; '> Msg</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#008c00; background:#ffffe8; '>5</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 49: <span style='color:#000000; background:#ffffe8; '>                MsgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$mess</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 50: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 51: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 52: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 53: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 54: <span style='color:#000000; background:#ffffe8; '></span>
 55: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>trim</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#696969; background:#ffffe8; '>// remove spaces at beginning and end</span><span style='color:#000000; background:#ffffe8; '></span>
 56: <span style='color:#000000; background:#ffffe8; '>    </span>
 57: <span style='color:#696969; background:#ffffe8; '>#    Check if user already exists</span><span style='color:#000000; background:#ffffe8; '></span>
 58: <span style='color:#696969; background:#ffffe8; '>#    -----------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 59: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$u</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>getUser</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"userid"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 60: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#400000; background:#ffffe8; '>is_array</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$u</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 61: <span style='color:#000000; background:#ffffe8; '>        msgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>msg</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#008c00; background:#ffffe8; '>109</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"user: </span><span style='color:#0000e6; background:#ffffe8; '>$userid</span><span style='color:#0000e6; background:#ffffe8; '> already exists for this site"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 62: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/body>&lt;/html>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 63: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 64: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 65: <span style='color:#000000; background:#ffffe8; '></span>
 66: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$u</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>getUser</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$useraddress</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"useraddress"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 67: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#400000; background:#ffffe8; '>is_array</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$u</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 68: <span style='color:#000000; background:#ffffe8; '>        msgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>msg</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#008c00; background:#ffffe8; '>177</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"The email address '</span><span style='color:#0000e6; background:#ffffe8; '>$useraddress</span><span style='color:#0000e6; background:#ffffe8; '>' is already used"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 69: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/body>&lt;/html>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 70: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 71: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
 72: <span style='color:#000000; background:#ffffe8; '></span>
 73: <span style='color:#696969; background:#ffffe8; '>#    gets all input form variables and set fields in user array</span><span style='color:#000000; background:#ffffe8; '></span>
 74: <span style='color:#696969; background:#ffffe8; '>#    ----------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 75: <span style='color:#000000; background:#ffffe8; '></span>
 76: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$unixdate</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>time</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 77: <span style='color:#000000; background:#ffffe8; '>    </span>
 78: <span style='color:#696969; background:#ffffe8; '># -------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 79: <span style='color:#696969; background:#ffffe8; '># Create user privileges (user->forums relation) for each forum</span><span style='color:#000000; background:#ffffe8; '></span>
 80: <span style='color:#696969; background:#ffffe8; '># -------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 81: <span style='color:#000000; background:#ffffe8; '></span>
 82: <span style='color:#696969; background:#ffffe8; '># initialize default values</span><span style='color:#000000; background:#ffffe8; '></span>
 83: <span style='color:#696969; background:#ffffe8; '># --------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 84: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"unixdate"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '>$unixdate</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 85: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"userid"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 86: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"lastpost"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 87: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"totalpost"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 88: <span style='color:#000000; background:#ffffe8; '></span>
 89: <span style='color:#696969; background:#ffffe8; '># For each forum in this site (if user is not an admin)</span><span style='color:#000000; background:#ffffe8; '></span>
 90: <span style='color:#696969; background:#ffffe8; '># -----------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 91: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$userpriv</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>!</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"admin"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>is_array</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 92: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#400000; background:#ffffe8; '>reset</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 93: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>while</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>list</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>each</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 94: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"bn_name"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
 95: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#400000; background:#ffffe8; '>is_array</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
 96: <span style='color:#696969; background:#ffffe8; '># if user has rights on this forum => gets all privileges set on this forum for this user</span><span style='color:#000000; background:#ffffe8; '></span>
 97: <span style='color:#696969; background:#ffffe8; '># ---------------------------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
 98: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#696969; background:#ffffe8; '>// initialize default values</span><span style='color:#000000; background:#ffffe8; '></span>
 99: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"bn_name"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
100: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"listpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
101: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"readpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
102: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"writepriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
103: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"modpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
104: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"state"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
105: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>while</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>list</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$priv</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$val</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>each</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
106: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$priv</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$val</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
107: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
108: <span style='color:#696969; background:#ffffe8; '># if moderator has been selected for this forum :</span><span style='color:#000000; background:#ffffe8; '></span>
109: <span style='color:#696969; background:#ffffe8; '># -----------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
110: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"modpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>1</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
111: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$userpriv</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"moder"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
112: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#696969; background:#ffffe8; '>//  moderator can also read, write, list => force all privileges</span><span style='color:#000000; background:#ffffe8; '></span>
113: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"listpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>1</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
114: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"readpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>1</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
115: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"writepriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>1</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
116: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>else</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
117: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#696969; background:#ffffe8; '>// this user has not moderator privilege</span><span style='color:#000000; background:#ffffe8; '></span>
118: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"modpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
119: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
120: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
121: <span style='color:#000000; background:#ffffe8; '>            </span>
122: <span style='color:#696969; background:#ffffe8; '># insert into userforum</span><span style='color:#000000; background:#ffffe8; '></span>
123: <span style='color:#696969; background:#ffffe8; '># ---------------------</span><span style='color:#000000; background:#ffffe8; '></span>
124: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>InsertPrivs </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
125: <span style='color:#000000; background:#ffffe8; '></span>
126: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&lt;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
127: <span style='color:#000000; background:#ffffe8; '>                    MsgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"could not insert user </span><span style='color:#0000e6; background:#ffffe8; '>$userid</span><span style='color:#0000e6; background:#ffffe8; '> in </span><span style='color:#0000e6; background:#ffffe8; '>${site}</span><span style='color:#0000e6; background:#ffffe8; '>_userforum"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>?site=</span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
128: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
129: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
130: <span style='color:#696969; background:#ffffe8; '># If moderator has been choosen, set forum's owner if not already set</span><span style='color:#000000; background:#ffffe8; '></span>
131: <span style='color:#696969; background:#ffffe8; '># ------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
132: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$uf_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"modpriv"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>1</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>empty</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"owner"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
133: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"owner"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
134: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>updateForum </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
135: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&lt;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
136: <span style='color:#000000; background:#ffffe8; '>                        MsgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"could not update owner in </span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '> for </span><span style='color:#0000e6; background:#ffffe8; '>$forum</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>?site=</span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
137: <span style='color:#000000; background:#ffffe8; '>                        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
138: <span style='color:#000000; background:#ffffe8; '>                    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
139: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
140: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
141: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
142: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
143: <span style='color:#000000; background:#ffffe8; '></span>
144: <span style='color:#696969; background:#ffffe8; '>#  Now insert this user in users table</span><span style='color:#000000; background:#ffffe8; '></span>
145: <span style='color:#696969; background:#ffffe8; '>#  -----------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
146: <span style='color:#000000; background:#ffffe8; '>    </span>
147: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>for</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#400000; background:#ffffe8; '>reset</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$form_field</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#400000; background:#ffffe8; '>current</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>next</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
148: <span style='color:#000000; background:#ffffe8; '>        $</span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#400000; background:#ffffe8; '>stripSlashes</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$</span><span style='color:#000000; background:#ffffe8; '>$form_field</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
149: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$u_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$form_field</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '>$</span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
150: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
151: <span style='color:#000000; background:#ffffe8; '></span>
152: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$u_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"password"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>md5</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$passwd1</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
153: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$u_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"lastlogin"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
154: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$u_fields</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"totallogins"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
155: <span style='color:#000000; background:#ffffe8; '></span>
156: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>insertUser </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$u_fields</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
157: <span style='color:#000000; background:#ffffe8; '></span>
158: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&lt;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>0</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
159: <span style='color:#000000; background:#ffffe8; '>        MsgForm </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"could not insert user </span><span style='color:#0000e6; background:#ffffe8; '>$userid</span><span style='color:#0000e6; background:#ffffe8; '> in </span><span style='color:#0000e6; background:#ffffe8; '>${site}</span><span style='color:#0000e6; background:#ffffe8; '>_users"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>?site=</span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"back"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
160: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
161: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
162: <span style='color:#000000; background:#ffffe8; '></span>
163: <span style='color:#696969; background:#ffffe8; '># If new user has administrator privilege =>  insert into main database</span><span style='color:#000000; background:#ffffe8; '></span>
164: <span style='color:#696969; background:#ffffe8; '># ---------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
165: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$userpriv</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"admin"</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>|</span><span style='color:#808030; background:#ffffe8; '>|</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$userpriv</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"root"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
166: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> getDBaccess</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$cfg_dir</span><span style='color:#0000e6; background:#ffffe8; '>/site_agora.</span><span style='color:#0000e6; background:#ffffe8; '>$ext</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
167: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_access</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"bn_access"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
168: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_dbname</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"dbname"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
169: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_dbhost</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"dbhost"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
170: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_dbport</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"dbport"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
171: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_dbuser</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"dbuser"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
172: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_dbpassword</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbparam</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"dbpassword"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
173: <span style='color:#000000; background:#ffffe8; '></span>
174: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$site_access</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>!</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_access</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
175: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>include</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$inc_dir</span><span style='color:#0000e6; background:#ffffe8; '>/</span><span style='color:#0000e6; background:#ffffe8; '>$agora_access</span><span style='color:#0000e6; background:#ffffe8; '>.</span><span style='color:#0000e6; background:#ffffe8; '>$ext</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
176: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
177: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_db_class</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>${agora_access}</span><span style='color:#0000e6; background:#ffffe8; '>_access"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
178: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_db</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>new</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_db_class</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
179: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$ret</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>openDB</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$agora_dbhost</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbport</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbuser</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbpassword</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$agora_dbname</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"agora"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
180: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$agora_db</span><span style='color:#808030; background:#ffffe8; '>-</span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '>insertUser </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"agora"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$u_fields</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
181: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
182: <span style='color:#000000; background:#ffffe8; '></span>
183: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;br>&lt;br>&lt;center>&lt;table border width='80%'>&lt;tr>&lt;td>&lt;table width='100%'>&lt;tr>&lt;td align=center colspan=2>&lt;strong>User '</span><span style='color:#0000e6; background:#ffffe8; '>$userid</span><span style='color:#0000e6; background:#ffffe8; '>' has been created&lt;/strong>&lt;/td>&lt;/tr>&lt;tr>&lt;td align=center>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
184: <span style='color:#000000; background:#ffffe8; '>    displayUrl</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$WA_SELF</span><span style='color:#0000e6; background:#ffffe8; '>?site=</span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"create another user"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"Create another user"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
185: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;td align=center>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
186: <span style='color:#000000; background:#ffffe8; '>    displayUrl</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"edit_user.</span><span style='color:#0000e6; background:#ffffe8; '>$ext</span><span style='color:#0000e6; background:#ffffe8; '>?site=</span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '>&amp;userid=</span><span style='color:#0000e6; background:#ffffe8; '>$userid</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"edit this user"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"configure more about this user"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
187: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>print</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;/tr>&lt;/table>&lt;/td>&lt;/tr>&lt;/table>&lt;/center>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
188: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>exit</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
189: <span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#696969; background:#ffffe8; '>// End $go</span><span style='color:#000000; background:#ffffe8; '></span>
190: <span style='color:#000000; background:#ffffe8; '></span>
191: <span style='color:#696969; background:#ffffe8; '>#  -------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
192: <span style='color:#696969; background:#ffffe8; '>#  Initialize default values then display FORM</span><span style='color:#000000; background:#ffffe8; '></span>
193: <span style='color:#696969; background:#ffffe8; '>#  -------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
194: <span style='color:#000000; background:#ffffe8; '></span>
195: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>?</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>:</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
196: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$username</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$username</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>?</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$username</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>:</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
197: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$useraddress</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$useraddress</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>?</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$useraddress</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>:</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
198: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$homepage</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$homepage</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>?</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$homepage</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>:</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
199: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$details</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$details</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>?</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$details</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>:</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
200: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$mailok</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$mailok</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>?</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$mailok</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>:</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"Y"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
201: <span style='color:#000000; background:#ffffe8; '></span>
202: <span style='color:#a65700; background:#ffffe8; '>?></span>
203: 
204:  <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>SCRIPT type="text/javascript" LANGUAGE="</span><span style='color:#0000e6; '>JavaScript</span><span style='color:#800000; font-weight:bold; '>"</span><span style='color:#a65700; '>></span>
205: <span style='color:#696969; '>&lt;!--</span> <span style='color:#696969; '>// Hide for old browsers</span>
206:   <span style='color:#800000; font-weight:bold; '>function</span> CheckForm<span style='color:#808030; '>(</span>form<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
207: <span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '></span>
208: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>include</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#0000e6; background:#ffffe8; '>$tmpl_dir</span><span style='color:#0000e6; background:#ffffe8; '>/admin/user_fields.</span><span style='color:#0000e6; background:#ffffe8; '>$ext</span><span style='color:#0000e6; background:#ffffe8; '>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
209: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#696969; background:#ffffe8; '>/* Check for required fields */</span><span style='color:#000000; background:#ffffe8; '></span>
210: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>isset</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_bind_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
211: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>while</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>list</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$required</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>each</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$bn_bind_var</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
212: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$required</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
213: <span style='color:#a65700; background:#ffffff; '>?></span><span style='color:#000000; background:#ffffff; '></span>
214: <span style='color:#000000; background:#ffffff; '>    if (form</span><span style='color:#008c00; background:#ffffff; '>.</span><span style='color:#a65700; background:#ffffff; '>&lt;?</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#a65700; background:#ffffff; '>?></span><span style='color:#000000; background:#ffffff; '>.value</span><span style='color:#008c00; background:#ffffff; '>.</span><span style='color:#000000; background:#ffffff; '>length == </span><span style='color:#008c00; background:#ffffff; '>0</span><span style='color:#000000; background:#ffffff; '>) {</span>
215: <span style='color:#000000; background:#ffffff; '>      alert ("</span><span style='color:#a65700; background:#ffffff; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>DspMsg</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#008c00; background:#ffffe8; '>56</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#a65700; background:#ffffff; '>?></span><span style='color:#000000; background:#ffffff; '>");</span>
216: <span style='color:#000000; background:#ffffff; '>      form</span><span style='color:#008c00; background:#ffffff; '>.</span><span style='color:#a65700; background:#ffffff; '>&lt;?</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$field</span><span style='color:#a65700; background:#ffffff; '>?></span><span style='color:#000000; background:#ffffff; '>.focus();</span>
217: <span style='color:#000000; background:#ffffff; '>      return false;</span>
218: <span style='color:#000000; background:#ffffff; '>    }</span>
219: <span style='color:#a65700; background:#ffffff; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '></span>
220: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
221: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
222: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
223: <span style='color:#a65700; background:#ffffe8; '>?></span>
224:     <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#0f4d75; '>true</span><span style='color:#800080; '>;</span>
225:   <span style='color:#800080; '>}</span>
226: <span style='color:#696969; '>// End of script --></span>
227:  <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>SCRIPT</span><span style='color:#a65700; '>></span>
228: 
229: <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>FORM</span><span style='color:#274796; '> </span><span style='color:#074726; '>NAME</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"form_post"</span><span style='color:#274796; '> </span><span style='color:#074726; '>METHOD</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"post"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ACTION</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"</span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$WA_SELF</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#0000e6; '>"</span><span style='color:#274796; '> </span><span style='color:#074726; '>onSubmit</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"return CheckForm(this);"</span><span style='color:#274796; '> </span><span style='color:#a65700; '>></span>
230: 
231: <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>INPUT</span><span style='color:#274796; '> </span><span style='color:#074726; '>TYPE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"hidden"</span><span style='color:#274796; '> </span><span style='color:#074726; '>NAME</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"site"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALUE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"</span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$site</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#0000e6; '>"</span><span style='color:#a65700; '>></span>
232: <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>INPUT</span><span style='color:#274796; '> </span><span style='color:#074726; '>TYPE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"hidden"</span><span style='color:#274796; '> </span><span style='color:#074726; '>NAME</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"go"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALUE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"1"</span><span style='color:#a65700; '>></span>
233: <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>INPUT</span><span style='color:#274796; '> </span><span style='color:#074726; '>TYPE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"hidden"</span><span style='color:#274796; '> </span><span style='color:#074726; '>NAME</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"key"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALUE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"</span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$key</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#0000e6; '>"</span><span style='color:#a65700; '>></span>
234: <span style='color:#a65700; background:#ffffe8; '>&lt;?php</span><span style='color:#000000; background:#ffffe8; '></span>
235: <span style='color:#000000; background:#ffffe8; '>    table_header </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"Create a new user in the site: &lt;em></span><span style='color:#0000e6; background:#ffffe8; '>$site</span><span style='color:#0000e6; background:#ffffe8; '>&lt;/em>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
236: <span style='color:#a65700; background:#ffffe8; '>?></span>
237:  <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TABLE</span><span style='color:#274796; '> </span><span style='color:#074726; '>BORDER</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"0"</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"100%"</span><span style='color:#a65700; '>></span>
238:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>CAPTION</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>B</span><span style='color:#a65700; '>></span>user informations<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>B</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>CAPTION</span><span style='color:#a65700; '>></span>
239:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
240:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>login (user id)<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
241:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>textField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"userid"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$userid</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>32</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
242:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
243:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
244:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>user's name<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
245:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>textField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"username"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$username</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>64</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
246:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
247:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
248:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>E-mail Address<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
249:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>textField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"useraddress"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$useraddress</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>255</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>td</span><span style='color:#a65700; '>></span>
250:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
251:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
252:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>Home page URL<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
253:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>textField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"homepage"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$homepage</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>255</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
254:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
255:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
256:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"TOP"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>description<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
257:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>textArea </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"details"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$details</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>2</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
258:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
259:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
260:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>Give a password for this user<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
261:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>passwordField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"passwd1"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$passwd1</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>32</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
262:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
263:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
264:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>Please reenter the password<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
265:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>passwordField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"passwd2"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$passwd2</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>30</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>32</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
266:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
267:   <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
268:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#274796; '> </span><span style='color:#074726; '>WIDTH</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"40%"</span><span style='color:#274796; '> </span><span style='color:#074726; '>ALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"RIGHT"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALIGN</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"MIDDLE"</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span>Add this user to the mailing list?<span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>strong</span><span style='color:#a65700; '>></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>td</span><span style='color:#a65700; '>></span>
269:    <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span><span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '> radioButton </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"mailok"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"Y"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$mailok</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"Yes"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '>  </span>
270: <span style='color:#000000; background:#ffffe8; '>         radioButton </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"mailok"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"N"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$mailok</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"No"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#a65700; background:#ffffe8; '>?></span><span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TD</span><span style='color:#a65700; '>></span>
271:   <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TR</span><span style='color:#a65700; '>></span>
272:  <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>TABLE</span><span style='color:#a65700; '>></span>
273: <span style='color:#a65700; background:#ffffe8; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '></span>
274: <span style='color:#696969; background:#ffffe8; '>## &lt;/td>&lt;/tr></span><span style='color:#000000; background:#ffffe8; '></span>
275: <span style='color:#696969; background:#ffffe8; '># Initialize user privileges choices</span><span style='color:#000000; background:#ffffe8; '></span>
276: <span style='color:#696969; background:#ffffe8; '># ----------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
277: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#000000; background:#ffffe8; '>$granted_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"user"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$user_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"user"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
278: <span style='color:#000000; background:#ffffe8; '></span>
279: <span style='color:#696969; background:#ffffe8; '># super user/administrator can grant moderator privilege</span><span style='color:#000000; background:#ffffe8; '></span>
280: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>type</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#0000e6; background:#ffffe8; '>"root"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>|</span><span style='color:#808030; background:#ffffe8; '>|</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>type</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#0000e6; background:#ffffe8; '>"admin"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
281: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$granted_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"moder"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$user_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"moder"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
282: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
283: <span style='color:#000000; background:#ffffe8; '></span>
284: <span style='color:#696969; background:#ffffe8; '># super user can grant administrator privilege</span><span style='color:#000000; background:#ffffe8; '></span>
285: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>type</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#0000e6; background:#ffffe8; '>"root"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
286: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$granted_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"admin"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$user_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"admin"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
287: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
288: <span style='color:#000000; background:#ffffe8; '></span>
289: <span style='color:#696969; background:#ffffe8; '># Only 'admin' can grant sysadmin privilege</span><span style='color:#000000; background:#ffffe8; '></span>
290: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>userid</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#0000e6; background:#ffffe8; '>"admin"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
291: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#000000; background:#ffffe8; '>$granted_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"root"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$user_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"root"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
292: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
293: <span style='color:#000000; background:#ffffe8; '></span>
294: <span style='color:#696969; background:#ffffe8; '># Now displays a combo with granteable privileges if we are admin or root</span><span style='color:#000000; background:#ffffe8; '></span>
295: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#400000; background:#ffffe8; '>count</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$granted_privs</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#008c00; background:#ffffe8; '>1</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
296: <span style='color:#696969; background:#ffffe8; '>## &lt;TR>&lt;TD></span><span style='color:#000000; background:#ffffe8; '></span>
297: <span style='color:#a65700; background:#ffffff; '>?></span><span style='color:#000000; background:#ffffff; '></span>
298: <span style='color:#000000; background:#ffffff; '> </span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TABLE</span><span style='color:#274796; background:#ffffff; '> </span><span style='color:#074726; background:#ffffff; '>BORDER</span><span style='color:#808030; background:#ffffff; '>=</span><span style='color:#008c00; background:#ffffff; '>0</span><span style='color:#274796; background:#ffffff; '> </span><span style='color:#074726; background:#ffffff; '>WIDTH</span><span style='color:#808030; background:#ffffff; '>=</span><span style='color:#0000e6; background:#ffffff; '>"100%"</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
299: <span style='color:#000000; background:#ffffff; '>  </span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>CAPTION</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>B</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '>User privileges</span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>B</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>CAPTION</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
300: <span style='color:#000000; background:#ffffff; '>  </span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TR</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
301: <span style='color:#000000; background:#ffffff; '>   </span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TD</span><span style='color:#274796; background:#ffffff; '> </span><span style='color:#074726; background:#ffffff; '>WIDTH</span><span style='color:#808030; background:#ffffff; '>=</span><span style='color:#0000e6; background:#ffffff; '>"40%"</span><span style='color:#274796; background:#ffffff; '> </span><span style='color:#074726; background:#ffffff; '>ALIGN</span><span style='color:#808030; background:#ffffff; '>=</span><span style='color:#0000e6; background:#ffffff; '>"RIGHT"</span><span style='color:#274796; background:#ffffff; '> </span><span style='color:#074726; background:#ffffff; '>VALIGN</span><span style='color:#808030; background:#ffffff; '>=</span><span style='color:#0000e6; background:#ffffff; '>"MIDDLE"</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>strong</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '>Choose privilege for this user</span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>strong</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '>: </span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TD</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
302: <span style='color:#000000; background:#ffffff; '>   </span><span style='color:#a65700; background:#ffffff; '>&lt;</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TD</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#a65700; background:#ffffff; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '>listBox </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"userpriv"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$granted_privs</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"user"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#a65700; background:#ffffff; '>?></span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TD</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
303: <span style='color:#000000; background:#ffffff; '>  </span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TR</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
304: <span style='color:#000000; background:#ffffff; '> </span><span style='color:#a65700; background:#ffffff; '>&lt;/</span><span style='color:#800000; background:#ffffff; font-weight:bold; '>TABLE</span><span style='color:#a65700; background:#ffffff; '>></span><span style='color:#000000; background:#ffffff; '></span>
305: <span style='color:#a65700; background:#ffffff; '>&lt;?</span><span style='color:#000000; background:#ffffe8; '></span>
306: <span style='color:#696969; background:#ffffe8; '>## &lt;/TD>&lt;/TR></span><span style='color:#000000; background:#ffffe8; '></span>
307: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>else</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
308: <span style='color:#000000; background:#ffffe8; '>        hiddenField </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"userpriv"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"user"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '> </span>
309: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
310: <span style='color:#000000; background:#ffffe8; '>    </span>
311: <span style='color:#696969; background:#ffffe8; '># Now, if the logged user is a moderator: we display all the forums he is responsible for</span><span style='color:#000000; background:#ffffe8; '></span>
312: <span style='color:#696969; background:#ffffe8; '># ---------------------------------------------------------------------------------------</span><span style='color:#000000; background:#ffffe8; '></span>
313: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>level</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> MODER</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#808030; background:#ffffe8; '>&amp;</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>is_array</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
314: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#400000; background:#ffffe8; '>reset</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
315: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;TABLE border=1 WIDTH='100%'>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
316: <span style='color:#000000; background:#ffffe8; '>        caption </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;b>set privileges over availables forums for this user&lt;/b>&lt;br></span>
317: <span style='color:#0000e6; background:#ffffe8; '>             As a "</span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$user_privs</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>type</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>" select the access privileges you want to grant to this user"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>""</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
318: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;tr>&lt;th>Forum&lt;/th>&lt;th>Title&lt;/th>&lt;th>can list&lt;/th>&lt;th>can read&lt;/th>&lt;th>can write&lt;/th>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
319: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>level</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '> MODER</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
320: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;th>moderator&lt;/th>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
321: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
322: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"&lt;th>active&lt;/th>&lt;/tr>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
323: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>while</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>list</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#400000; background:#ffffe8; '>each</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
324: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#000000; background:#ffffe8; '>$bn_title</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"bn_title"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
325: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>=</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$forums</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#808030; background:#ffffe8; '>[</span><span style='color:#0000e6; background:#ffffe8; '>"bn_name"</span><span style='color:#808030; background:#ffffe8; '>]</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
326: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#400000; background:#ffffe8; '>printf</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;tr>&lt;td>&lt;b>%s&lt;/b>&lt;/td>&lt;td>%s&lt;/TD>&lt;td>"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$name</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#000000; background:#ffffe8; '>$bn_title</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
327: <span style='color:#000000; background:#ffffe8; '>            checkBox </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#0000e6; background:#ffffe8; '>"[listpriv]"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
328: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>print</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;td>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
329: <span style='color:#000000; background:#ffffe8; '>            checkBox </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#0000e6; background:#ffffe8; '>"[readpriv]"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
330: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>print</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;td>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
331: <span style='color:#000000; background:#ffffe8; '>            checkBox </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#0000e6; background:#ffffe8; '>"[writepriv]"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
332: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>print</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;td>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
333: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>if</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$auth</span><span style='color:#808030; background:#ffffe8; '>-></span><span style='color:#000000; background:#ffffe8; '>level</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>></span><span style='color:#000000; background:#ffffe8; '> MODER</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#800080; background:#ffffe8; '>{</span><span style='color:#000000; background:#ffffe8; '></span>
334: <span style='color:#000000; background:#ffffe8; '>                checkBox </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#0000e6; background:#ffffe8; '>"[modpriv]"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"0"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
335: <span style='color:#000000; background:#ffffe8; '>                </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>print</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;td>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
336: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
337: <span style='color:#000000; background:#ffffe8; '>            checkBox </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#000000; background:#ffffe8; '>$forum</span><span style='color:#808030; background:#ffffe8; '>.</span><span style='color:#0000e6; background:#ffffe8; '>"[state]"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>,</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>"1"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
338: <span style='color:#000000; background:#ffffe8; '>            </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>print</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#0000e6; background:#ffffe8; '>"&lt;/td>&lt;/tr>"</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
339: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
340: <span style='color:#000000; background:#ffffe8; '>        </span><span style='color:#800000; background:#ffffe8; font-weight:bold; '>echo</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#0000e6; background:#ffffe8; '>" &lt;/TABLE>"</span><span style='color:#800080; background:#ffffe8; '>;</span><span style='color:#000000; background:#ffffe8; '></span>
341: <span style='color:#000000; background:#ffffe8; '>    </span><span style='color:#800080; background:#ffffe8; '>}</span><span style='color:#000000; background:#ffffe8; '></span>
342: <span style='color:#a65700; background:#ffffe8; '>?></span>
343: <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>br</span><span style='color:#a65700; '>></span>
344: <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>center</span><span style='color:#a65700; '>></span>
345:  <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>INPUT</span><span style='color:#274796; '> </span><span style='color:#074726; '>TYPE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"submit"</span><span style='color:#274796; '> </span><span style='color:#074726; '>VALUE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"Create user"</span><span style='color:#a65700; '>></span>
346:  <span style='color:#a65700; '>&lt;</span><span style='color:#800000; font-weight:bold; '>INPUT</span><span style='color:#274796; '> </span><span style='color:#074726; '>TYPE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"reset"</span><span style='color:#274796; '>  </span><span style='color:#074726; '>VALUE</span><span style='color:#808030; '>=</span><span style='color:#0000e6; '>"Reset"</span><span style='color:#a65700; '>></span>
347: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>CENTER</span><span style='color:#a65700; '>></span>
348: <span style='color:#a65700; background:#ffffe8; '>&lt;?php</span><span style='color:#000000; background:#ffffe8; '> table_footer</span><span style='color:#808030; background:#ffffe8; '>(</span><span style='color:#808030; background:#ffffe8; '>)</span><span style='color:#000000; background:#ffffe8; '> </span><span style='color:#a65700; background:#ffffe8; '>?></span>
349: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>FORM</span><span style='color:#a65700; '>></span>
350: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>BODY</span><span style='color:#a65700; '>></span>
351: <span style='color:#a65700; '>&lt;/</span><span style='color:#800000; font-weight:bold; '>HTML</span><span style='color:#a65700; '>></span>
352: 
</pre></body></html>
