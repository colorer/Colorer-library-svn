  0: 
  1: <span class='d-Keyword def-Keyword'>import</span> std<span class='d-Symbol def-Symbol'>.</span>stdio<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  2: 
  3: <span class='d-Keyword def-Keyword'>void</span> <span class='d-KeywordLibFunctions def-FunctionKeyword def-Keyword'>main</span><span class='d-Symbol def-Symbol'>(</span><span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> args<span class='d-Symbol def-Symbol'>)</span>
  4: <span class='def-SymbolStrong def-Symbol'>{</span>
  5:     writefln<span class='d-Symbol def-Symbol'>(</span><span class='d-String def-String'>"Hello World, Reloaded"</span><span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
  6: 
  7:     <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// auto type inference and built-in foreach</span>
  8:     <span class='d-Keyword def-Keyword'>foreach</span> <span class='d-Symbol def-Symbol'>(</span>argc<span class='d-Symbol def-Symbol'>,</span> argv<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> args<span class='d-Symbol def-Symbol'>)</span>
  9:     <span class='def-SymbolStrong def-Symbol'>{</span>
 10:         <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// Object Oriented Programming</span>
 11:         CmdLin cl <span class='d-Symbol def-Symbol'>=</span> <span class='d-Keyword def-Keyword'>new</span> CmdLin<span class='d-Symbol def-Symbol'>(</span>argc<span class='d-Symbol def-Symbol'>,</span> argv<span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 12:         <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// Improved typesafe printf</span>
 13:         writefln<span class='d-Symbol def-Symbol'>(</span>cl<span class='d-Symbol def-Symbol'>.</span>argnum<span class='d-Symbol def-Symbol'>,</span> cl<span class='d-Symbol def-Symbol'>.</span>suffix<span class='d-Symbol def-Symbol'>,</span> <span class='d-String def-String'>" arg: </span><span class='d-EscapeSequence def-StringContent def-String'>%s</span><span class='d-String def-String'>"</span><span class='d-Symbol def-Symbol'>,</span> cl<span class='d-Symbol def-Symbol'>.</span>argv<span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 14:         <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// Automatic or explicit memory management</span>
 15:         <span class='d-Keyword def-Keyword'>delete</span> cl<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 16:     <span class='def-SymbolStrong def-Symbol'>}</span>
 17: 
 18:     <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// Nested structs and classes</span>
 19:     <span class='d-Keyword def-Keyword'>struct</span> specs
 20:     <span class='def-SymbolStrong def-Symbol'>{</span>
 21:         <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// all members automatically initialized</span>
 22:         <span class='d-Keyword def-Keyword'>int</span> count<span class='d-Symbol def-Symbol'>,</span> allocated<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 23:     <span class='def-SymbolStrong def-Symbol'>}</span>
 24: 
 25:     <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// Nested functions can refer to outer</span>
 26:     <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// variables like args</span>
 27:     specs argspecs<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span>
 28:     <span class='def-SymbolStrong def-Symbol'>{</span>
 29:         specs<span class='d-Symbol def-Symbol'>*</span> s <span class='d-Symbol def-Symbol'>=</span> <span class='d-Keyword def-Keyword'>new</span> specs<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 30:         <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// no need for '->'</span>
 31:         s<span class='d-Symbol def-Symbol'>.</span>count <span class='d-Symbol def-Symbol'>=</span> args<span class='d-Symbol def-Symbol'>.</span>length<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>           <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// get length of array with .length</span>
 32:         s<span class='d-Symbol def-Symbol'>.</span>allocated <span class='d-Symbol def-Symbol'>=</span> <span class='d-Keyword def-Keyword'>typeof</span><span class='d-Symbol def-Symbol'>(</span>args<span class='d-Symbol def-Symbol'>)</span><span class='d-Symbol def-Symbol'>.</span>sizeof<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// built-in native type properties</span>
 33:         <span class='d-Keyword def-Keyword'>foreach</span> <span class='d-Symbol def-Symbol'>(</span>argv<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> args<span class='d-Symbol def-Symbol'>)</span>
 34:             s<span class='d-Symbol def-Symbol'>.</span>allocated <span class='d-Symbol def-Symbol'>+</span><span class='d-Symbol def-Symbol'>=</span> argv<span class='d-Symbol def-Symbol'>.</span>length <span class='d-Symbol def-Symbol'>*</span> <span class='d-Keyword def-Keyword'>typeof</span><span class='d-Symbol def-Symbol'>(</span>argv<span class='d-Symbol def-Symbol'>[</span><span class='def-NumberDec def-Number'>0</span><span class='d-Symbol def-Symbol'>]</span><span class='d-Symbol def-Symbol'>)</span><span class='d-Symbol def-Symbol'>.</span>sizeof<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 35:         <span class='d-Keyword def-Keyword'>return</span> <span class='d-Symbol def-Symbol'>*</span>s<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 36:     <span class='def-SymbolStrong def-Symbol'>}</span>
 37: 
 38:     <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// built-in string and common string operations</span>
 39:     writefln<span class='d-Symbol def-Symbol'>(</span><span class='d-String def-String'>"argc = </span><span class='d-EscapeSequence def-StringContent def-String'>%d</span><span class='d-String def-String'>, "</span> <span class='d-Symbol def-Symbol'>~</span> <span class='d-String def-String'>"allocated = </span><span class='d-EscapeSequence def-StringContent def-String'>%d</span><span class='d-String def-String'>"</span><span class='d-Symbol def-Symbol'>,</span>
 40:     argspecs<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span><span class='d-Symbol def-Symbol'>.</span>count<span class='d-Symbol def-Symbol'>,</span> argspecs<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span><span class='d-Symbol def-Symbol'>.</span>allocated<span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 41: <span class='def-SymbolStrong def-Symbol'>}</span>
 42: 
 43: <span class='d-Keyword def-Keyword'>class</span> CmdLin
 44: <span class='def-SymbolStrong def-Symbol'>{</span>
 45:     <span class='d-Keyword def-Keyword'>private</span> <span class='d-Keyword def-Keyword'>int</span> _argc<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 46:     <span class='d-Keyword def-Keyword'>private</span> <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> _argv<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 47: 
 48: <span class='d-Keyword def-Keyword'>public</span><span class='d-Label def-Label'>:</span>
 49:     <span class='d-Keyword def-Keyword'>this</span><span class='d-Symbol def-Symbol'>(</span><span class='d-Keyword def-Keyword'>int</span> argc<span class='d-Symbol def-Symbol'>,</span> <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> argv<span class='d-Symbol def-Symbol'>)</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// constructor</span>
 50:     <span class='def-SymbolStrong def-Symbol'>{</span>
 51:         _argc <span class='d-Symbol def-Symbol'>=</span> argc<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 52:         _argv <span class='d-Symbol def-Symbol'>=</span> argv<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 53:     <span class='def-SymbolStrong def-Symbol'>}</span>
 54: 
 55:     <span class='d-Keyword def-Keyword'>int</span> argnum<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span>
 56:     <span class='def-SymbolStrong def-Symbol'>{</span>
 57:         <span class='d-Keyword def-Keyword'>return</span> _argc <span class='d-Symbol def-Symbol'>+</span> <span class='def-NumberDec def-Number'>1</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 58:     <span class='def-SymbolStrong def-Symbol'>}</span>
 59: 
 60:     <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> argv<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span>
 61:     <span class='def-SymbolStrong def-Symbol'>{</span>
 62:         <span class='d-Keyword def-Keyword'>return</span> _argv<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 63:     <span class='def-SymbolStrong def-Symbol'>}</span>
 64: 
 65:     <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> suffix<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span>
 66:     <span class='def-SymbolStrong def-Symbol'>{</span>
 67:         <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> suffix <span class='d-Symbol def-Symbol'>=</span> <span class='d-String def-String'>"th"</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 68:         <span class='d-Keyword def-Keyword'>switch</span> <span class='d-Symbol def-Symbol'>(</span>_argc<span class='d-Symbol def-Symbol'>)</span>
 69:         <span class='def-SymbolStrong def-Symbol'>{</span>
 70:           <span class='d-Keyword def-Keyword'>case</span> <span class='def-NumberDec def-Number'>0</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>:</span>
 71:             suffix <span class='d-Symbol def-Symbol'>=</span> <span class='d-String def-String'>"st"</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 72:             <span class='d-Keyword def-Keyword'>break</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 73:           <span class='d-Keyword def-Keyword'>case</span> <span class='def-NumberDec def-Number'>1</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>:</span>
 74:             suffix <span class='d-Symbol def-Symbol'>=</span> <span class='d-String def-String'>"nd"</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 75:             <span class='d-Keyword def-Keyword'>break</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 76:           <span class='d-Keyword def-Keyword'>case</span> <span class='def-NumberDec def-Number'>2</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>:</span>
 77:             suffix <span class='d-Symbol def-Symbol'>=</span> <span class='d-String def-String'>"rd"</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 78:             <span class='d-Keyword def-Keyword'>break</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 79:           <span class='d-Keyword def-Keyword'>default</span><span class='d-Label def-Label'>:</span>
 80:         <span class='d-Keyword def-Keyword'>break</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 81:         <span class='def-SymbolStrong def-Symbol'>}</span>
 82:         <span class='d-Keyword def-Keyword'>return</span> suffix<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 83:     <span class='def-SymbolStrong def-Symbol'>}</span>
 84: <span class='def-SymbolStrong def-Symbol'>}</span>
 85: 
 86: 
 87: <span class='d-Keyword def-Keyword'>class</span> Test
 88: <span class='def-SymbolStrong def-Symbol'>{</span>
 89:        <span class='d-Keyword def-Keyword'>static</span> <span class='d-Keyword def-Keyword'>this</span><span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span>
 90:        <span class='def-SymbolStrong def-Symbol'>{</span>
 91:        <span class='def-SymbolStrong def-Symbol'>}</span>
 92: <span class='def-SymbolStrong def-Symbol'>}</span>
 93: 
 94: 
 95: <span class='d-Keyword def-Keyword'>void</span> func1<span class='d-Symbol def-Symbol'>(</span><span class='d-Keyword def-Keyword'>int</span> x<span class='d-Symbol def-Symbol'>)</span>
 96: <span class='def-SymbolStrong def-Symbol'>{</span>   <span class='d-Keyword def-Keyword'>int</span> x<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// illegal, x shadows parameter x</span>
 97: 
 98:     <span class='d-Keyword def-Keyword'>int</span> y<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
 99: 
100:     <span class='def-SymbolStrong def-Symbol'>{</span> <span class='d-Keyword def-Keyword'>int</span> y<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// illegal, y shadows enclosing scope's y</span>
101: 
102:     <span class='d-Keyword def-Keyword'>void</span> <span class='d-Keyword def-Keyword'>delegate</span><span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span> dg<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
103:     dg <span class='d-Symbol def-Symbol'>=</span> <span class='def-SymbolStrong def-Symbol'>{</span> <span class='d-Keyword def-Keyword'>int</span> y<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// ok, this y is not in the same function</span>
104: 
105:     <span class='d-Keyword def-Keyword'>struct</span> S
106:     <span class='def-SymbolStrong def-Symbol'>{</span>
107:     <span class='d-Keyword def-Keyword'>int</span> y<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>        <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// ok, this y is a member, not a local</span>
108:     <span class='def-SymbolStrong def-Symbol'>}</span>
109: 
110:     <span class='def-SymbolStrong def-Symbol'>{</span> <span class='d-Keyword def-Keyword'>int</span> z<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span>
111:     <span class='def-SymbolStrong def-Symbol'>{</span> <span class='d-Keyword def-Keyword'>int</span> z<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// ok, this z is not shadowing the other z</span>
112: 
113:     <span class='def-SymbolStrong def-Symbol'>{</span> <span class='d-Keyword def-Keyword'>int</span> t<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> <span class='def-SymbolStrong def-Symbol'>}</span>
114:     <span class='def-SymbolStrong def-Symbol'>{</span> t<span class='d-Symbol def-Symbol'>+</span><span class='d-Symbol def-Symbol'>+</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>   <span class='def-SymbolStrong def-Symbol'>}</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// illegal, t is undefined</span>
115: <span class='def-SymbolStrong def-Symbol'>}</span>
116: 
117: <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> a<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
118: 
119: 
120: <span class='d-Keyword def-Keyword'>foreach</span> <span class='d-Symbol def-Symbol'>(</span><span class='d-Keyword def-Keyword'>int</span> i<span class='d-Symbol def-Symbol'>,</span> <span class='d-Keyword def-Keyword'>char</span> c<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> a<span class='d-Symbol def-Symbol'>)</span>
121: <span class='def-SymbolStrong def-Symbol'>{</span>
122:     printf<span class='d-Symbol def-Symbol'>(</span><span class='d-String def-String'>"a[</span><span class='d-EscapeSequence def-StringContent def-String'>%d</span><span class='d-String def-String'>] = '</span><span class='d-EscapeSequence def-StringContent def-String'>%c</span><span class='d-String def-String'>'</span><span class='d-EscapeSequence def-StringContent def-String'>\n</span><span class='d-String def-String'>"</span><span class='d-Symbol def-Symbol'>,</span> i<span class='d-Symbol def-Symbol'>,</span> c<span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
123: <span class='def-SymbolStrong def-Symbol'>}</span>
124: 
125: 
126: <span class='d-Keyword def-Keyword'>char</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> a <span class='d-Symbol def-Symbol'>=</span> <span class='d-String def-String'>"</span><span class='d-EscapeSequence def-StringContent def-String'>\xE2</span><span class='d-EscapeSequence def-StringContent def-String'>\x89</span><span class='d-EscapeSequence def-StringContent def-String'>\xA0</span><span class='d-String def-String'>"</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// \u2260 encoded as 3 UTF-8 bytes</span>
127: 
128: <span class='d-Keyword def-Keyword'>foreach</span> <span class='d-Symbol def-Symbol'>(</span><span class='d-Keyword def-Keyword'>dchar</span> c<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> a<span class='d-Symbol def-Symbol'>)</span>
129: <span class='def-SymbolStrong def-Symbol'>{</span>
130:     printf<span class='d-Symbol def-Symbol'>(</span><span class='d-String def-String'>"a[] = </span><span class='d-EscapeSequence def-StringContent def-String'>%x</span><span class='d-EscapeSequence def-StringContent def-String'>\n</span><span class='d-String def-String'>"</span><span class='d-Symbol def-Symbol'>,</span> c<span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// prints 'a[] = 2260'</span>
131: <span class='def-SymbolStrong def-Symbol'>}</span>
132: 
133: <span class='d-Keyword def-Keyword'>dchar</span><span class='d-Symbol def-Symbol'>[</span><span class='d-Symbol def-Symbol'>]</span> b <span class='d-Symbol def-Symbol'>=</span> <span class='d-String def-String'>"</span><span class='d-EscapeSequence def-StringContent def-String'>\u2260</span><span class='d-String def-String'>"</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>
134: 
135: <span class='d-Keyword def-Keyword'>foreach</span> <span class='d-Symbol def-Symbol'>(</span><span class='d-Keyword def-Keyword'>char</span> c<span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span> b<span class='d-Symbol def-Symbol'>)</span>
136: <span class='def-SymbolStrong def-Symbol'>{</span>
137:     printf<span class='d-Symbol def-Symbol'>(</span><span class='d-String def-String'>"</span><span class='d-EscapeSequence def-StringContent def-String'>%x</span><span class='d-String def-String'>, "</span><span class='d-Symbol def-Symbol'>,</span> c<span class='d-Symbol def-Symbol'>)</span><span class='d-StructureSymbol def-SymbolStrong def-Symbol'>;</span>    <span class='d-LineComment def-LineComment def-Comment def-Syntax'>// prints 'e2, 89, a0'</span>
138: <span class='def-SymbolStrong def-Symbol'>}</span>
139: 
140: 
141: <span class='d-Keyword def-Keyword'>int</span> gethardware<span class='d-Symbol def-Symbol'>(</span><span class='d-Symbol def-Symbol'>)</span>
142: <span class='def-SymbolStrong def-Symbol'>{</span>
143:     <span class='d-AsmCode def-Directive'>asm</span> <span class='d-StructureSymbol def-SymbolStrong def-Symbol'>{</span>
144:         <span class='asm-asmiBase asm-asmMnemonics def-Keyword'>mov</span>    <span class='asm-asmRegister def-Register'>EAX</span><span class='asm-asmSymbol def-Symbol'>,</span> <span class='asm-asmMnemonics def-Keyword'>dword</span> <span class='asm-asmMnemonics def-Keyword'>ptr</span> <span class='def-NumberHex def-Number'>0x1234</span><span class='asm-asmSymbol def-Symbol'>;</span>
145:     <span class='d-StructureSymbol def-SymbolStrong def-Symbol'>}</span>
146: <span class='def-SymbolStrong def-Symbol'>}</span>
147: 
