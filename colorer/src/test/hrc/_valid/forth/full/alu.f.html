 0: { =====================================================================
 1: ANS <span style='color:#800000; font-weight:bold; '>Forth</span> Test Suite
 2: 
 3: Copyright (<span style='color:#008c00; '>c</span>) <span style='color:#008c00; '>1998</span>, FORTH, Incorporated
 4: 
 5: This set <span style='color:#e34adc; '>of</span> tests has been taken from John Hayes' original Core.fr
 6: Dated Mon, <span style='color:#008c00; '>27</span> Nov <span style='color:#008c00; '>95</span> <span style='color:#008c00; '>13</span>:<span style='color:#008c00; '>10</span>.  We retain the following statement as
 7: required for its use:
 8: 
 9: (<span style='color:#008c00; '>C</span>) <span style='color:#008c00; '>1995</span> JOHNS HOPKINS UNIVERSITY <span style='color:#800000; font-weight:bold; '>/</span> APPLIED PHYSICS LABORATORY
10: MAY <span style='color:#008c00; '>BE</span> DISTRIBUTED FREELY AS LONG AS THIS COPYRIGHT NOTICE REMAINS.
11: 
12: His last know update was VERSION <span style='color:#008c00; '>1</span>.<span style='color:#008c00; '>2</span>
13: 
14: This program tests the core <span style='color:#800000; font-weight:bold; '>words</span> <span style='color:#e34adc; '>of</span> an ANS <span style='color:#800000; font-weight:bold; '>Forth</span> system.
15: The program assumes <span style='color:#008c00; '>a</span> two's complement implementation where
16: the range <span style='color:#e34adc; '>of</span> signed numbers <span style='color:#800000; font-weight:bold; '>is</span> -<span style='color:#008c00; '>2</span>^(n-<span style='color:#008c00; '>1</span>) ... <span style='color:#008c00; '>2</span>^(n-<span style='color:#008c00; '>1</span>)-<span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>and</span>
17: the range <span style='color:#e34adc; '>of</span> unsigned numbers <span style='color:#800000; font-weight:bold; '>is</span> <span style='color:#008c00; '>0</span> ... <span style='color:#008c00; '>2</span>^(n)-<span style='color:#008c00; '>1</span>.
18: 
19: ATHENA Contributions <span style='color:#800000; font-weight:bold; '>to</span> Johns Hopkins test suite.  <span style='color:#008c00; '>6</span>/<span style='color:#008c00; '>7</span>/<span style='color:#008c00; '>93</span>
20: 
21:   Greg Bailey     |  ATHENA Programming, Inc  |  <span style='color:#008c00; '>503</span>-<span style='color:#008c00; '>621</span>-<span style='color:#008c00; '>3215</span>  |
22: ----------------  |  <span style='color:#008c00; '>24680</span> NW Dixie Mtn Road  |  fax <span style='color:#008c00; '>621</span>-<span style='color:#008c00; '>3954</span>  |
23: greg@minerva.com  |  Hillsboro, <span style='color:#800000; font-weight:bold; '>OR</span> <span style='color:#008c00; '>97124</span>  US  |
24: 
25: S/M needs an advocate.
26: 
27: Dependencies: {<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>-></span> } { {{ TESTING MSB
28: 
29: Exports:
30: 
31: ===================================================================== }
32: 
33: <span style='color:#e34adc; '>HEX</span>
34: 
35: TESTING ALU BOUNDARY CONDITIONS
36: 
37: <span style='color:#800000; font-weight:bold; '>: </span><span style='color:#000000; background:#a8a800; '>ALU</span> <span style='color:#696969; '>( -- n )</span>
38:    -<span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>=</span> <span style='color:#e34adc; '>IF</span>
39:       <span style='color:#008c00; '>2</span>
40:    <span style='color:#e34adc; '>ELSE</span>  <span style='color:#008c00; '>1</span> -<span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>XOR</span>  <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>=</span> <span style='color:#e34adc; '>IF</span>
41:       <span style='color:#008c00; '>1</span>
42:    <span style='color:#e34adc; '>ELSE</span>  <span style='color:#696969; '>( s/m )</span> <span style='color:#008c00; '>0</span>
43:    <span style='color:#e34adc; '>THEN</span> <span style='color:#e34adc; '>THEN</span> ;
44: 
45: ALU <span style='color:#800000; font-weight:bold; '>DUP</span> <span style='color:#008c00; '>2</span> <span style='color:#800000; font-weight:bold; '>=</span> <span style='color:#800000; font-weight:bold; '>CONSTANT </span><span style='color:#000000; background:#a8a800; '>2'S</span>  <span style='color:#696969; '>( expect full width signed numbers! )</span>
46:     <span style='color:#800000; font-weight:bold; '>DUP</span> <span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>=</span> <span style='color:#800000; font-weight:bold; '>CONSTANT </span><span style='color:#000000; background:#a8a800; '>1'S</span>  <span style='color:#696969; '>( expect full width signed numbers! )</span>
47:         <span style='color:#008c00; '>0</span> <span style='color:#800000; font-weight:bold; '>=</span> <span style='color:#800000; font-weight:bold; '>CONSTANT </span><span style='color:#000000; background:#a8a800; '>S/M</span>  <span style='color:#696969; '>( expect to be enlightened in future )</span>
48: 
49: <span style='color:#800000; font-weight:bold; '>: </span><span style='color:#000000; background:#a8a800; '>if{></span> <span style='color:#696969; '>( t )</span> <span style='color:#e34adc; '>IF</span> {<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#e34adc; '>ELSE</span> <span style='color:#008c00; '>7D</span> <span style='color:#800000; font-weight:bold; '>WORD</span> <span style='color:#800000; font-weight:bold; '>DROP</span> <span style='color:#e34adc; '>THEN</span> ;
50: 
51: <span style='color:#008c00; '>2</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> MSB <span style='color:#800000; font-weight:bold; '>INVERT</span> <span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> MSB }  <span style='color:#696969; '>( circular )</span>
52: <span style='color:#008c00; '>2</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> MSB <span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>-</span> <span style='color:#800000; font-weight:bold; '>-></span> MSB <span style='color:#800000; font-weight:bold; '>INVERT</span> }  <span style='color:#696969; '>( circular )</span>
53: <span style='color:#008c00; '>2</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> MSB <span style='color:#800000; font-weight:bold; '>INVERT</span>  <span style='color:#800000; font-weight:bold; '>DUP</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> -<span style='color:#008c00; '>2</span> }   <span style='color:#696969; '>( overflow )</span>
54: <span style='color:#008c00; '>2</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> MSB <span style='color:#800000; font-weight:bold; '>DUP</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }   <span style='color:#696969; '>( overflow )</span>
55: 
56: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#008c00; '>0</span> <span style='color:#800000; font-weight:bold; '>=</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }   <span style='color:#696969; '>( -0 must test nonzero )</span>
57: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }   <span style='color:#696969; '>( clean zero from arith... )</span>
58: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#008c00; '>1</span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
59: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#008c00; '>0</span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
60: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#008c00; '>0</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
61: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#008c00; '>0</span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>-</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
62: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#008c00; '>0</span> <span style='color:#800000; font-weight:bold; '>-</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
63: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>+</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
64: <span style='color:#008c00; '>1</span>'S <span style='color:#e34adc; '>if</span>{<span style='color:#800000; font-weight:bold; '>></span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>TRUE</span> <span style='color:#800000; font-weight:bold; '>-</span> <span style='color:#800000; font-weight:bold; '>-></span> <span style='color:#008c00; '>0</span> }
65: 
66: 
